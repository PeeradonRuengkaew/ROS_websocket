{"ast":null,"code":"var _jsxFileName = \"/Users/peeradonruengkaew/my-app-webapp-ros/src/components/RobotState.jsx\";\nimport React, { Component } from \"react\";\nimport { Row, Col, Container } from \"react-bootstrap\";\nimport Config from \"../scripts/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass RobotState extends Component {\n  constructor() {\n    super();\n    this.state = {\n      ros: null,\n      x: 0,\n      y: 0,\n      theta: 0,\n      linear_velocity: 0,\n      angular_velocity: 0\n    };\n    this.init_connection();\n  }\n  init_connection() {\n    this.state.ros = new window.ROSLIB.Ros();\n    console.log(this.state.ros);\n    this.state.ros.on(\"connection\", () => {\n      console.log(\"connection established in Teleoperation Component!\");\n      console.log(this.state.ros);\n      this.setState({\n        connected: true\n      });\n    });\n    this.state.ros.on(\"close\", () => {\n      console.log(\"connection is closed! \");\n      this.setState({\n        connected: false\n      });\n      setTimeout(() => {\n        try {\n          this.state.ros.connect(\"ws://\" + Config.ROSBRIDGE_SERVER_IP + \":\" + Config.ROSBRIDGE_SERVER_PORT + \"\");\n        } catch (error) {\n          console.log(\"connection problem\");\n        }\n      }, Config.RECONNETION_TIMER);\n    });\n    try {\n      this.state.ros.connect(\"ws://\" + Config.ROSBRIDGE_SERVER_IP + \":\" + Config.ROSBRIDGE_SERVER_PORT + \"\");\n    } catch (error) {\n      console.log(\"ws://\" + Config.ROSBRIDGE_SERVER_IP + \":\" + Config.ROSBRIDGE_SERVER_PORT + \"\");\n      console.log(\"connection problem\");\n    }\n  }\n  componentDidMount() {\n    this.getRobotState();\n  }\n  getRobotState() {\n    var pose_sub = new window.ROSLIB.Topic({\n      ros: this.state.ros,\n      name: \"/turtle1/pose\",\n      messageType: \"turtlesim/msg/Pose\"\n    });\n    pose_sub.subscribe(message => {\n      this.setState({\n        x: message.x\n      });\n      this.setState({\n        y: message.y\n      });\n    });\n    var velocity_sub = new window.ROSLIB.Topic({\n      ros: this.state.ros,\n      name: \"/odom\",\n      messageType: \"nav_msgs/msg/Odometry\"\n    });\n    velocity_sub.subscribe(message => {\n      this.setState({\n        linear_velocity: message.twist.twist.linear.x.toFixed(2)\n      });\n      this.setState({\n        angular_velocity: message.twist.twist.angular.z.toFixed(2)\n      });\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mt-4\",\n            children: \"Position\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-0\",\n            children: [\"x: \", this.state.x]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-0\",\n            children: [\"y: \", this.state.y]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-0\",\n            children: [\"theta: \", this.state.theta]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mt-4\",\n            children: \"Velocities\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-0\",\n            children: [\"Linear Velocity: \", this.state.linear_velocity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-0\",\n            children: [\"Angular Velocity: \", this.state.angular_velocity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default RobotState;","map":{"version":3,"names":["React","Component","Row","Col","Container","Config","RobotState","constructor","state","ros","x","y","theta","linear_velocity","angular_velocity","init_connection","window","ROSLIB","Ros","console","log","on","setState","connected","setTimeout","connect","ROSBRIDGE_SERVER_IP","ROSBRIDGE_SERVER_PORT","error","RECONNETION_TIMER","componentDidMount","getRobotState","pose_sub","Topic","name","messageType","subscribe","message","velocity_sub","twist","linear","toFixed","angular","z","render"],"sources":["/Users/peeradonruengkaew/my-app-webapp-ros/src/components/RobotState.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport {Row, Col, Container} from \"react-bootstrap\";\nimport Config from \"../scripts/config\";\n\nclass RobotState extends Component{\n    state = {\n        ros: null,\n        x: 0,\n        y: 0,\n        theta: 0,\n        linear_velocity: 0,\n        angular_velocity: 0,\n    };\n\n    constructor(){\n        super();\n        this.init_connection();\n    }\n\n\n    init_connection(){\n        this.state.ros = new window.ROSLIB.Ros();\n        console.log(this.state.ros);\n\n        this.state.ros.on(\"connection\",()=>{\n            console.log(\"connection established in Teleoperation Component!\");\n            console.log(this.state.ros);\n            this.setState({connected:true});\n        });\n        this.state.ros.on(\"close\",() =>{\n            console.log(\"connection is closed! \");\n            this.setState({connected: false});\n\n            setTimeout(()=>{\n                try{\n                    this.state.ros.connect(\"ws://\"+Config.ROSBRIDGE_SERVER_IP+\":\"+Config.ROSBRIDGE_SERVER_PORT+\"\");\n                \n                } catch(error){\n                    console.log(\"connection problem\");\n                }\n\n\n            }, Config.RECONNETION_TIMER);\n\n\n        });\n\n        try{\n            this.state.ros.connect(\"ws://\" + \n            Config.ROSBRIDGE_SERVER_IP +\n            \":\" +\n            Config.ROSBRIDGE_SERVER_PORT+\n            \"\");\n        \n        } catch(error){\n            console.log(\"ws://\" +\n            Config.ROSBRIDGE_SERVER_IP +\n            \":\" +\n            Config.ROSBRIDGE_SERVER_PORT+\n            \"\")\n            console.log(\"connection problem\");\n        }\n    }\n\n\n    componentDidMount(){\n        this.getRobotState();\n    }\n\n    getRobotState(){\n        var pose_sub = new window.ROSLIB.Topic({\n            ros: this.state.ros, \n            name: \"/turtle1/pose\",\n            messageType: \"turtlesim/msg/Pose\",\n    \n    \n        });\n\n        pose_sub.subscribe((message) => {\n            this.setState({x: message.x});\n            this.setState({y: message.y});\n        });\n\n         \n        var velocity_sub = new window.ROSLIB.Topic({\n            ros: this.state.ros, \n            name: \"/odom\",\n            messageType: \"nav_msgs/msg/Odometry\",\n        });\n\n        velocity_sub.subscribe((message) => {\n            this.setState({linear_velocity: message.twist.twist.linear.x.toFixed(2)});\n            this.setState({angular_velocity: message.twist.twist.angular.z.toFixed(2)});\n         });\n\n    }\n\n\n    \n\n    \n\n    render(){\n        return(\n            <div>\n                <Row>\n                    <Col>\n                    <h4 className=\"mt-4\">Position</h4>\n                    <p className=\"mt-0\">x: {this.state.x}</p>\n                    <p className=\"mt-0\">y: {this.state.y}</p>\n                    <p className=\"mt-0\">theta: {this.state.theta}</p>\n\n                    </Col>\n                </Row>\n                <Row>\n                    <Col>\n                    <h4 className=\"mt-4\">Velocities</h4>\n                    <p className=\"mt-0\">Linear Velocity: {this.state.linear_velocity}</p>\n                    <p className=\"mt-0\">Angular Velocity: {this.state.angular_velocity}</p>\n                    \n\n                    </Col>\n                </Row>\n\n            </div>\n       \n        );\n    }\n}\nexport default RobotState;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}